<section class="departments-view">
    <div class="department-staff" ng-repeat="(department, people) in filtered = (data | filterBy: ['name', 'email', 'phone', 'department']:filterstr) | groupBy:'department'">

        <department-staff-view
            caption="department"
            data="people"
            order="order"
            orderdir="orderdir"
        ></department-staff-view>

    </div>
    <div class="staff-footer">
        <p class="lead text-center staff-loading" ng-show="loading">
            Load staff...
        </p>

        <p ng-show="filtered.length > 0"><b>Total count:</b> {{filtered.length}}</p>
        <p ng-show="emptyResults()"><b>Sorry, we can't find anyone</b></p>
    </div>
</section>